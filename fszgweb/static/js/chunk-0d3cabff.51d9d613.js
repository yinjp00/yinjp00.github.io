/*!
 *  build: vue-admin-beautiful 
 *  vue-admin-beautiful author: chuzhixin 1204505056@qq.com 
 *  vue-admin-beautiful QQ Group(QQ群): 972435319、1139183756 
 *  time: 2022-1-21 16:12:28
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0d3cabff"],{"042d":function(e,t,a){"use strict";a.r(t),a.d(t,"getScoreTypeList",(function(){return r})),a.d(t,"getOwnSubList",(function(){return o})),a.d(t,"ownSubGetId",(function(){return l}));var n=a("b775");function r(e){return Object(n["default"])({url:"/api/yxdpc/ownSub/getScoreTypeList",method:"post",data:e})}function o(e){return Object(n["default"])({url:"/api/yxdpc/ownSub/getList",method:"post",data:e})}function l(e){return Object(n["default"])({url:"/api/yxdpc/ownSub/getId",method:"post",data:e})}},2211:function(e,t,a){e.exports={"menu-color":"rgba(255,255,255,.95)","menu-color-active":"rgba(255,255,255,.95)","menu-background":"#282c34"}},"2bb4":function(e,t,a){"use strict";a("6dcb")},"6dcb":function(e,t,a){},"7a4c":function(e,t,a){"use strict";a("2211")},"7ef0":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"check-container"},[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"每日重复",name:"1"}}),a("el-tab-pane",{attrs:{label:"每周重复",name:"2"}}),a("el-tab-pane",{attrs:{label:"每月重复",name:"3"}})],1),a("vab-query-form",[a("el-form",{ref:"queryForm",attrs:{inline:!0,model:e.queryForm},nativeOn:{submit:function(e){e.preventDefault()}}},[a("vab-query-form-left-panel",{attrs:{span:18}},[a("el-form-item",[e._v(" 自检任务： "),a("el-select",{attrs:{clearable:"",placeholder:"请选择自检任务"},model:{value:e.queryForm.ownTaskId,callback:function(t){e.$set(e.queryForm,"ownTaskId",t)},expression:"queryForm.ownTaskId"}},e._l(e.ownTaskArr,(function(e){return a("el-option",{key:e.pid,attrs:{label:e.taskName+"("+e.startDate+"至"+e.endDate+")",value:e.pid}})})),1)],1),a("el-form-item",[e._v(" 点评结果： "),a("el-select",{attrs:{clearable:"",placeholder:"请选择点评结果"},model:{value:e.queryForm.subComment,callback:function(t){e.$set(e.queryForm,"subComment",t)},expression:"queryForm.subComment"}},e._l(e.subCommentArr,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",[e._v(" 提交日期： "),a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd HH:mm:ss","picker-options":e.pickerOptions},on:{change:e.dateRangeChange},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1)],1),a("vab-query-form-right-panel",{attrs:{span:6}},[a("el-form-item",[a("el-button",{on:{click:function(t){return e.resetQuery("queryForm")}}},[e._v("重置")]),a("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:function(t){return e.queryData("queryForm")}}},[e._v(" 查询 ")])],1)],1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,"element-loading-text":e.elementLoadingText,"header-cell-style":{background:"#EFF3F8"}},on:{"selection-change":e.setSelectRows}},[a("el-table-column",{attrs:{"show-overflow-tooltip":"",fixed:"",prop:"columnName3",label:"门店名称","min-width":"170"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"taskName",label:"任务名称","min-width":"360"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"columnName5",label:"门店编码","min-width":"120"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"xxxxx",label:"加盟商","min-width":"140"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"columnName6",label:"开店日期","min-width":"140"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"templateName",label:"模版名称","min-width":"120"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"subRule",label:"得分","min-width":"120"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"subContent",label:"点评内容","min-width":"160"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"columnName2",label:"自检人","min-width":"140"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"taskDate",label:"开始自检时间","min-width":"180"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"subDate",label:"报告提交日期","min-width":"180"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"subTime",label:"报告提交时间","min-width":"180"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"columnName1",label:"点评人","min-width":"140"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"commentDate",label:"点评日期","min-width":"180"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",fixed:"right",label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleEdit(n)}}},[e._v("查看报告")])]}}])})],1),a("el-pagination",{attrs:{background:"","current-page":e.queryForm.pageIndex,"page-size":e.queryForm.pageSize,layout:e.layout,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),a("edit",{ref:"edit",on:{"fetch-data":e.fetchData}})],1)},r=[],o=a("1da1"),l=(a("b0c0"),a("a9e3"),a("96cf"),a("042d")),i=a("cba7"),s={name:"CheckModel",components:{Edit:i["default"]},data:function(){var e=this;return{activeName:"1",queryForm:{pageIndex:1,pageSize:10,scoreType:"1",subDateStart:"",subDateEnd:"",subComment:"",ownTaskId:""},scoreTypeObj:{1:"每日重复",2:"每周重复",3:"每月重复"},ownTaskArr:[],subCommentArr:[{value:"1",label:"未点评"},{value:"2",label:"合格"},{value:"3",label:"不合格"}],status:[{value:"0",label:"结束"},{value:"1",label:"执行中"},{value:"2",label:"已停用"}],dateRange:"",pickerMinDate:"",pickerMaxDate:"",pickerOptions:{onPick:function(t){var a=t.maxDate,n=t.minDate;e.pickerMinDate=n.getTime(),a&&(e.pickerMaxDate=a.getTime())},disabledDate:function(t){var a=2592e6;if(""!==e.pickerMinDate&&!e.pickerMaxDate){var n=e.pickerMinDate+a;return n>new Date&&(n=new Date),t.getTime()>n||t.getTime()>Date.now()}if(""!==e.pickerMaxDate&&""!==e.pickerMinDate){var r=e.pickerMaxDate-a,o=e.pickerMinDate+a;return o>new Date&&(o=new Date),t.getTime()<r||t.getTime()>o}return t.getTime()>Date.now()}},statusValue:"",list:[],listLoading:!1,elementLoadingText:"正在加载...",layout:"total, sizes, prev, pager, next, jumper",total:0,selectRows:""}},created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getScoreTypeList();case 1:case"end":return t.stop()}}),t)})))()},methods:{getScoreTypeList:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["getScoreTypeList"])({scoreType:e.activeName});case 2:a=t.sent,n=a.code,r=a.data,200===n&&(e.ownTaskArr=r);case 6:case"end":return t.stop()}}),t)})))()},handleClick:function(e,t){var a=this;a.activeName=e.name,a.queryForm.scoreType=e.name,a.queryForm.ownTaskId="",a.list=[],a.queryForm.pageIndex=1,a.total=0,a.getScoreTypeList()},setSelectRows:function(e){this.selectRows=e},handleEdit:function(e){e.pid?this.$refs["edit"].showEdit(e):this.$refs["edit"].showEdit()},handleRefuse:function(e){e.pid&&(this.formRefuse.uuid=e.pid)},handleSizeChange:function(e){this.queryForm.pageSize=e,this.fetchData()},handleCurrentChange:function(e){this.queryForm.pageIndex=e,this.fetchData()},resetQuery:function(e){console.log(e),this.$refs[e].resetFields()},dateRangeChange:function(e){e&&(this.queryForm.subDateStart=e[0],this.queryForm.subDateEnd=e[1])},queryData:function(){var e=this.queryForm,t=e.subDateStart,a=e.subDateEnd;t?a?(this.queryForm.pageIndex=1,this.fetchData()):this.$baseMessage("请选择结束提交日期","warning"):this.$baseMessage("请选择开始提交日期","warning")},fetchData:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.listLoading=!0,t.next=3,Object(l["getOwnSubList"])(e.queryForm);case 3:a=t.sent,n=a.code,r=a.data,200==n&&(e.list=r.result,e.total=Number(r.totalRecords),e.listLoading=!1);case 7:case"end":return t.stop()}}),t)})))()}}},c=s,u=(a("2bb4"),a("2877")),d=Object(u["a"])(c,n,r,!1,null,"4f81a29c",null);t["default"]=d.exports},cba7:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"基础信息",visible:e.dialogFormVisible,width:"1200px",top:"8vh"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.close}},[a("div",{staticClass:"dialogCus"},[a("el-row",{attrs:{gutter:0}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content"},[e._v("门店名称："+e._s(e.list.columnName3))])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content"},[e._v("加盟商："+e._s(e.list.xxx))])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content"})])],1),a("el-divider"),a("h3",{staticStyle:{"margin-bottom":"30px"}},[e._v("自检信息")]),a("el-row",{attrs:{gutter:0}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content"},[e._v("自检人："+e._s(e.list.columnName2))])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content"},[e._v("自检人岗位："+e._s(e.list.xxx))])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content"},[e._v("模板名称："+e._s(e.list.templateName))])])],1),a("el-row",{attrs:{gutter:0}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content"},[e._v("开始自检时间："+e._s(e.list.taskDate))])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content"},[e._v("报告提交时间："+e._s(e.list.subTime))])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content"},[e._v(" 模板分值/合格线/实际得分："+e._s(e.list.xxx)+"/"+e._s(e.list.columnName7)+"/"+e._s(e.list.subRule)+" ")])])],1),a("el-row",{attrs:{gutter:0}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content"},[e._v(" 自检结果："+e._s(e.subCommentArr[e.list.subComment])+" ")])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content"},[e._v("点评时间："+e._s(e.list.commentDate))])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content"})])],1),a("el-divider"),a("h3",{staticStyle:{"margin-bottom":"30px"}},[e._v("总结信息")]),a("el-row",{attrs:{gutter:0}},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple"},[e._v(" 信息内容："+e._s(e.list.subContent)+" ")])])],1),a("el-divider"),a("el-button",{staticStyle:{"margin-bottom":"30px"},attrs:{type:"info",plain:""}},[e._v(" 自检项("+e._s(e.selfItemNum)+") ")]),a("div",{staticClass:"sticky"},[a("el-row",{attrs:{gutter:0}},[a("el-col",{directives:[{name:"sticky",rawName:"v-sticky",value:{zIndex:10,stickyTop:0,disabled:!1},expression:"{ zIndex: 10, stickyTop: 0, disabled: false }"}],attrs:{span:6}},[a("el-tabs",{attrs:{"tab-position":"left"},on:{"tab-click":e.handleClick}},e._l(e.list.itemList,(function(e){return a("el-tab-pane",{key:e.name,attrs:{label:e.catogoryName}})})),1)],1),a("el-col",{attrs:{span:18}},e._l(e.list.itemList,(function(t,n){return a("div",{key:t.name,attrs:{id:"tLink"+n}},[a("div",[e._v("1."+e._s(t.checkContent))]),a("span",{staticClass:"des"},[e._v(e._s(t.scoringCriteria))]),a("div",[a("el-row",{attrs:{gutter:0}},[a("el-col",{attrs:{span:4}},[e._v(" 项分值(合格项)："+e._s(t.itemRule)+"分 ")]),a("el-col",{attrs:{span:3}},[e._v(" 巡检结果："+e._s(e.subCommentArr[t.itemComment])+" ")]),a("el-col",{attrs:{span:3}},[e._v("点评分数："+e._s(t.commentRule))])],1)],1),e._l(t.itemImg.split(","),(function(e){return a("el-image",{key:e,staticClass:"checkImg",attrs:{src:e,lazy:"",fit:"cover","preview-src-list":[e]}})})),a("el-divider")],2)})),0)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.close}},[e._v("确 定")])],1)])},r=[],o=a("1da1"),l=(a("96cf"),a("042d")),i=a("325e"),s=a.n(i),c={name:"Edit",components:{},directives:{sticky:s.a},data:function(){return{templateTypeArr:[{value:"1",label:"门店"},{value:"2",label:"常规"},{value:"3",label:"专项"},{value:"4",label:"飞行（预留）"}],subCommentArr:{1:"未点评",2:"合格",3:"不合格"},list:[],selfItemNum:0,dialogFormVisible:!1}},computed:{},created:function(){},mounted:function(){},methods:{showEdit:function(e){e&&e.pid&&this.ownSubGetId(e.pid),this.dialogFormVisible=!0},close:function(){this.dialogFormVisible=!1},handleClick:function(e,t){var a=parseInt(e.index);this.$el.querySelector("#tLink".concat(a)).scrollIntoView({behavior:"smooth"})},ownSubGetId:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.listLoading=!0,a.next=3,Object(l["ownSubGetId"])({uuid:e});case 3:n=a.sent,r=n.data,t.list=r,t.selfItemNum=r.itemList.length,setTimeout((function(){t.listLoading=!1}),300);case 8:case"end":return a.stop()}}),a)})))()}}},u=c,d=(a("7a4c"),a("2877")),m=Object(d["a"])(u,n,r,!1,null,null,null);t["default"]=m.exports}}]);