/*!
 *  build: vue-admin-beautiful 
 *  vue-admin-beautiful author: chuzhixin 1204505056@qq.com 
 *  vue-admin-beautiful QQ Group(QQ群): 972435319、1139183756 
 *  time: 2022-1-21 16:12:28
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-240fdffe"],{"6c5c":function(e,t,a){"use strict";a("cb10")},"6f7f":function(e,t,a){"use strict";a.r(t),a.d(t,"getBiPatrolFinishList",(function(){return o})),a.d(t,"getEmployees",(function(){return r}));var n=a("b775");function o(e){return Object(n["default"])({url:"/api/yxdpc/biPatrolFinish/getList",method:"post",data:e})}function r(e){return Object(n["default"])({url:"/api/yxdpc/common/getEmployees",method:"post",data:e})}},cb10:function(e,t,a){},f7c9:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"check-container"},[a("vab-query-form",[a("el-form",{ref:"queryForm",attrs:{inline:!0,model:e.queryForm},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{attrs:{label:"",prop:"empId"}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择巡检人"},model:{value:e.queryForm.empId,callback:function(t){e.$set(e.queryForm,"empId",t)},expression:"queryForm.empId"}},e._l(e.empIdArr,(function(e){return a("el-option",{key:e.pid,attrs:{label:e.name,value:e.pid}})})),1)],1),a("el-form-item",{attrs:{label:""}},[a("el-date-picker",{attrs:{type:"monthrange","range-separator":"至","start-placeholder":"开始月份","end-placeholder":"结束月份",format:"yyyy-MM","value-format":"yyyy-MM"},on:{change:e.dateRangeChange},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),a("el-form-item",[a("el-button",{on:{click:function(t){return e.resetQuery("queryForm")}}},[e._v("重置")]),a("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:function(t){return e.queryData("queryForm")}}},[e._v(" 查询 ")])],1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,"element-loading-text":e.elementLoadingText,"header-cell-style":{background:"#EFF3F8"}},on:{"selection-change":e.setSelectRows}},[a("el-table-column",{attrs:{"show-overflow-tooltip":"",fixed:"",prop:"name",label:"巡检人","min-width":"120"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",fixed:"",prop:"dictionaryName",label:"角色名称","min-width":"120"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"taskDate",label:"巡检月份","min-width":"120"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"storeNum",label:"计划巡检门店数","min-width":"140"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"subStoreNum",label:"实际巡检门店数","min-width":"140"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"门店完成率","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(e._s(e.get2Percent(n.subStoreNum,n.storeNum)))])]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"planSubNum",label:"计划巡检报告数","min-width":"140"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"subTaskNum",label:"实际巡检报告数","min-width":"140"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"报告数完成率","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(e._s(e.get2Percent(n.subTaskNum,n.planSubNum)))])]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"subTaskHgnum",label:"实际巡检报告合格数","min-width":"160"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"报告合格率","min-width":"140"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(e._s(e.get2Percent(n.subTaskHgnum,n.subTaskNum)))])]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"subTaskBhgnum",label:"实际巡检报告不合格数","min-width":"170"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"报告不合格率","min-width":"140"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(e._s(e.get2Percent(n.subTaskBhgnum,n.subTaskNum)))])]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"subRectifyNum",label:"实际巡检报告整改数","min-width":"160"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"报告整改率","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(e._s(e.get2Percent(n.subRectifyNum,n.subTaskNum)))])]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"avgRule",label:"平均分数","min-width":"110"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"平均巡检时间","min-width":"140"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(e._s(e.getSec2Min(n.avgTime)))])]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"taskName",label:"任务名称","min-width":"150"}})],1),a("el-pagination",{attrs:{background:"","current-page":e.queryForm.pageIndex,"page-size":e.queryForm.pageSize,layout:e.layout,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},o=[],r=a("1da1"),l=(a("a9e3"),a("96cf"),a("6f7f")),i=a("61f7"),s={name:"BiPatrolFinish",components:{},data:function(){return{queryForm:{pageIndex:1,pageSize:10,startDate:"",endDate:"",empId:""},empIdArr:[],dateRange:"",pickerMinDate:"",pickerMaxDate:"",list:[],listLoading:!1,elementLoadingText:"正在加载...",layout:"total, sizes, prev, pager, next, jumper",total:0,selectRows:""}},created:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getEmployees();case 1:case"end":return t.stop()}}),t)})))()},methods:{getEmployees:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,n,o,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={},a.pageIndex=1,a.pageSize=1e3,t.next=5,Object(l["getEmployees"])(a);case 5:n=t.sent,n.message,o=n.code,r=n.data,200===o&&(e.empIdArr=r);case 10:case"end":return t.stop()}}),t)})))()},setSelectRows:function(e){this.selectRows=e},get2Percent:function(e,t){return Object(i["Percent2age"])(e,t)},getSec2Min:function(e){return Object(i["sec2Min"])(e)},handleSizeChange:function(e){this.queryForm.pageSize=e,this.fetchData()},handleCurrentChange:function(e){this.queryForm.pageIndex=e,this.fetchData()},resetQuery:function(e){this.$refs[e].resetFields()},dateRangeChange:function(e){e&&(this.queryForm.startDate=e[0],this.queryForm.endDate=e[1])},queryData:function(){var e=this.queryForm,t=e.startDate,a=e.endDate;t?a?(this.queryForm.pageIndex=1,this.fetchData()):this.$baseMessage("请选择结束月份","warning"):this.$baseMessage("请选择开始月份","warning")},fetchData:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.listLoading=!0,t.next=3,Object(l["getBiPatrolFinishList"])(e.queryForm);case 3:a=t.sent,n=a.code,o=a.data,200==n&&(e.list=o.result,e.total=Number(o.totalRecords),e.listLoading=!1);case 7:case"end":return t.stop()}}),t)})))()}}},u=s,c=(a("6c5c"),a("2877")),m=Object(c["a"])(u,n,o,!1,null,"58ccf27d",null);t["default"]=m.exports}}]);