/*!
 *  build: vue-admin-beautiful 
 *  vue-admin-beautiful author: chuzhixin 1204505056@qq.com 
 *  vue-admin-beautiful QQ Group(QQ群): 972435319、1139183756 
 *  time: 2022-1-21 16:12:28
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-19666e69"],{"00ce2":function(e,t,a){},"065c":function(e,t,a){"use strict";a("ca1f")},"0c85":function(e,t,a){"use strict";a("00ce2")},"15d4":function(e,t,a){"use strict";a.r(t),a.d(t,"getCheckList",(function(){return o})),a.d(t,"saveOrUpdate",(function(){return i})),a.d(t,"checkGetId",(function(){return s})),a.d(t,"doDelete",(function(){return c}));var r=a("b775");function o(e){return Object(r["default"])({url:"/api/yxdpc/check/getList",method:"post",data:e})}function i(e){return Object(r["default"])({url:"/api/yxdpc/check/saveOrUpdate",method:"post",data:e})}function s(e){return Object(r["default"])({url:"/api/yxdpc/check/getId",method:"post",data:e})}function c(e){return Object(r["default"])({url:"/api/yxdpc/check/delete",method:"post",data:e})}},"2be9":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.title,visible:e.dialogFormVisible,width:"870px",top:"8vh"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.close}},[a("div",{staticClass:"dialogCus"},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"320px"}},[a("el-form-item",{attrs:{label:"分类:",prop:"checkCatogoryId"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.form.checkCatogoryId,callback:function(t){e.$set(e.form,"checkCatogoryId",t)},expression:"form.checkCatogoryId"}},e._l(e.catogorys,(function(e){return a("el-option",{key:e.pid,attrs:{label:e.catogoryName,value:e.pid}})})),1)],1),a("el-form-item",{attrs:{label:"巡检编码（不用传入 系统自动生成）:",prop:"checkCode"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.checkCode,callback:function(t){e.$set(e.form,"checkCode",t)},expression:"form.checkCode"}})],1),a("el-form-item",{attrs:{label:"巡检名称（预留）:",prop:"checkName"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.checkName,callback:function(t){e.$set(e.form,"checkName",t)},expression:"form.checkName"}})],1),a("el-form-item",{attrs:{label:"评分标准描述:",prop:"scoringCriteria"}},[a("el-input",{attrs:{type:"textarea",rows:3,autocomplete:"off"},model:{value:e.form.scoringCriteria,callback:function(t){e.$set(e.form,"scoringCriteria",t)},expression:"form.scoringCriteria"}})],1),a("el-form-item",{attrs:{label:"巡检内容:",prop:"checkContent"}},[a("el-input",{attrs:{type:"textarea",rows:3,autocomplete:"off"},model:{value:e.form.checkContent,callback:function(t){e.$set(e.form,"checkContent",t)},expression:"form.checkContent"}})],1),a("el-form-item",{attrs:{label:"巡检标准图片案例:",prop:"checkImg"}},[a("el-upload",{ref:"upload",staticClass:"upload-content",attrs:{action:e.action,"auto-upload":!0,"close-on-click-modal":!1,data:e.data,"file-list":e.imgList,headers:e.headers,limit:e.limit,multiple:!0,name:"file","on-change":e.handleChange,"on-error":e.handleError,"on-exceed":e.handleExceed,"on-preview":e.handlePreview,"on-progress":e.handleProgress,"on-remove":e.handleRemove,"on-success":e.handleSuccess,accept:"image/png, image/jpeg","list-type":"picture-card"}},[a("i",{staticClass:"el-icon-plus",attrs:{slot:"trigger"},slot:"trigger"}),a("el-dialog",{attrs:{visible:e.dialogVisible,"append-to-body":"",title:"查看大图"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",[a("img",{attrs:{src:e.form.checkImg,alt:"",width:"100%"}})])])],1)],1),a("el-form-item",{attrs:{label:"巡检项属性:",prop:"checkAttribute"}},[a("el-radio-group",{staticClass:"padd10",model:{value:e.form.checkAttribute,callback:function(t){e.$set(e.form,"checkAttribute",t)},expression:"form.checkAttribute"}},[a("el-radio",{attrs:{label:"1"}},[e._v("一般项此项参与总分合计")]),a("el-radio",{attrs:{label:"2"}},[e._v("加分项此项不参与总分为额外加分项")]),a("el-radio",{attrs:{label:"3"}},[e._v("扣分项此项不参与总分为额外减分项")]),a("el-radio",{attrs:{label:"4"}},[e._v(" 红线项此项不合格将导致该项巡检分类得0分 ")]),a("el-radio",{attrs:{label:"5"}},[e._v(" 否决项此项不合格将导致整份报告得0分 ")])],1)],1),a("el-form-item",{attrs:{label:"状态:",prop:"status"}},[a("el-radio-group",{model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[a("el-radio",{attrs:{label:1}},[e._v("可用")]),a("el-radio",{attrs:{label:2}},[e._v("不可用")])],1)],1),a("el-form-item",{attrs:{label:"报表统计属性（此项巡检不合格是否扣款）:",prop:"isDeduction"}},[a("el-radio-group",{model:{value:e.form.isDeduction,callback:function(t){e.$set(e.form,"isDeduction",t)},expression:"form.isDeduction"}},[a("el-radio",{attrs:{label:"1"}},[e._v("是")]),a("el-radio",{attrs:{label:"0"}},[e._v("否")])],1)],1),a("el-form-item",{attrs:{label:"巡检不合格 是否上传图片或视频:",prop:"isUnqualified"}},[a("el-radio-group",{model:{value:e.form.isUnqualified,callback:function(t){e.$set(e.form,"isUnqualified",t)},expression:"form.isUnqualified"}},[a("el-radio",{attrs:{label:"1"}},[e._v("是")]),a("el-radio",{attrs:{label:"0"}},[e._v("否")])],1)],1),a("el-form-item",{attrs:{label:"整改 是否上传图片或视频:",prop:"isRectification"}},[a("el-radio-group",{model:{value:e.form.isRectification,callback:function(t){e.$set(e.form,"isRectification",t)},expression:"form.isRectification"}},[a("el-radio",{attrs:{label:"1"}},[e._v("是")]),a("el-radio",{attrs:{label:"0"}},[e._v("否")])],1)],1),a("el-form-item",{attrs:{label:"巡检合格 是否上传图片或视频:",prop:"isQualified"}},[a("el-radio-group",{model:{value:e.form.isQualified,callback:function(t){e.$set(e.form,"isQualified",t)},expression:"form.isQualified"}},[a("el-radio",{attrs:{label:"1"}},[e._v("是")]),a("el-radio",{attrs:{label:"0"}},[e._v("否")])],1)],1),a("el-form-item",{attrs:{label:"是否允许从相册上传图片或视频:",prop:"isAlbum"}},[a("el-radio-group",{model:{value:e.form.isAlbum,callback:function(t){e.$set(e.form,"isAlbum",t)},expression:"form.isAlbum"}},[a("el-radio",{attrs:{label:"1"}},[e._v("是")]),a("el-radio",{attrs:{label:"0"}},[e._v("否")])],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.close}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("确 定")])],1)])},o=[],i=a("1da1"),s=(a("96cf"),a("ac1f"),a("1276"),a("d3b7"),a("25f0"),a("d81d"),a("a434"),a("159b"),a("99af"),a("b0c0"),a("15d4")),c=a("e9df"),n={name:"Edit",components:{},data:function(){return{form:{pid:"",checkCatogoryId:"",checkCode:"",checkName:"",scoringCriteria:"",checkContent:"",catalogItemId:"",checkImg:"",checkAttribute:"",status:1,isDeduction:"1",isUnqualified:"1",isRectification:"1",isQualified:"1",isAlbum:"1"},rules:{checkCatogoryId:[{required:!0,trigger:"blur",message:"请选择分类"}],checkContent:[{required:!0,trigger:"blur",message:"请输入巡检内容"}],checkAttribute:[{required:!0,trigger:"blur",message:"请选择巡检项属性"}]},catogorys:[],catalogItems:[{value:"1",label:"选项1"},{value:"2",label:"选项2"},{value:"3",label:"选项3"}],title:"",dialogFormVisible:!1,dialogVisible:!1,action:"https://server.klfsvip.com/api/fileUpload",headers:{"u-token":Object(c["getAccessToken"])()},imgList:[],limit:9,picture:"picture",imgNum:0,imgSuccessNum:0,imgErrorNum:0,typeList:null,data:{}}},computed:{percentage:function(){return 0==this.allImgNum?0:100*this.$baseLodash.round(this.imgNum/this.allImgNum,2)}},created:function(){},methods:{showEdit:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r,o,i,c,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.catogorys=JSON.parse(sessionStorage.getItem("categoryList")),t.imgList=[],e){a.next=8;break}t.title="添加",r=sessionStorage.getItem("checkCatogoryId"),r&&(t.form.checkCatogoryId=r),a.next=16;break;case 8:return t.title="编辑",a.next=11,Object(s["checkGetId"])({uuid:e.pid});case 11:if(o=a.sent,i=o.data,t.form=Object.assign({},i),i.checkImg)for(c=i.checkImg.split(","),n=0;n<c.length;n++)t.imgList.push({name:"",url:c[n]});t.form.checkCatogoryId=i.checkCatogoryId.toString();case 16:t.dialogFormVisible=!0;case 17:case"end":return a.stop()}}),a)})))()},close:function(){this.$refs["form"].resetFields(),this.form=this.$options.data().form,this.dialogFormVisible=!1},save:function(){var e=this;this.$refs["form"].validate(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(a){var r,o,i,c,n,l,u,d,m,f,h,p,g,b,k,v,y,C,x;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=25;break}return r={},o=e.form,i=o.pid,c=o.checkCatogoryId,o.checkCode,n=o.checkName,l=o.scoringCriteria,u=o.checkContent,d=o.catalogItemId,m=o.checkImg,f=o.checkAttribute,h=o.status,p=o.isDeduction,g=o.isUnqualified,b=o.isRectification,k=o.isQualified,v=o.isAlbum,i&&(r.uuid=i),r.checkCatogoryId=c,r.checkContent=u,r.checkAttribute=f,n&&(r.checkName=n),l&&(r.scoringCriteria=l),d&&(r.catalogItemId=d),m&&(r.checkImg=m),h&&(r.status=h),p&&(r.isDeduction=p),g&&(r.isUnqualified=g),b&&(r.isRectification=b),k&&(r.isQualified=k),v&&(r.isAlbum=v),t.next=19,Object(s["saveOrUpdate"])(r);case 19:y=t.sent,C=y.message,x=y.code,200===x&&(e.$baseMessage(C||"操作成功！","success"),e.$emit("fetch-data"),e.close()),t.next=26;break;case 25:return t.abrupt("return",!1);case 26:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},handleProgress:function(e,t,a){},handleChange:function(e,t){e.size>1048576*this.size?(t.map((function(a,r){a===e&&t.splice(r,1)})),this.imgList=t):this.allImgNum=t.length},handleSuccess:function(e,t,a){if(200===e.code){this.imgNum=this.imgNum+1,this.imgSuccessNum=this.imgSuccessNum+1,a.length===this.imgNum&&this.$baseMessage("上传完成! 共上传".concat(a.length,"张图片"),"success"),this.imgList.push({name:"",url:e.data}),console.log(e.data);var r=[];this.imgList.forEach((function(e){r.push(e.url)})),console.log(r),this.form.checkImg=r.toString()}},handleError:function(e,t,a){this.imgNum=this.imgNum+1,this.imgErrorNum=this.imgErrorNum+1,this.$baseMessage("文件[".concat(t.raw.name,"]上传失败,文件大小为").concat(this.$baseLodash.round(t.raw.size/1024,0),"KB"),"error")},handleRemove:function(e,t){this.imgNum=this.imgNum-1,this.allNum=this.allNum-1,this.imgList=t},handlePreview:function(e){this.form.checkImg=e.url,this.dialogVisible=!0},handleExceed:function(e,t){this.$baseMessage("当前限制选择 ".concat(this.limit," 个文件，本次选择了\n           ").concat(e.length,"\n           个文件"),"error")}}},l=n,u=(a("065c"),a("2877")),d=Object(u["a"])(l,r,o,!1,null,null,null);t["default"]=d.exports},"755d":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"check-container"},[a("vab-query-form",[a("el-form",{attrs:{inline:!0,model:e.queryForm},nativeOn:{submit:function(e){e.preventDefault()}}},[a("vab-query-form-left-panel",{attrs:{span:18}},[a("el-form-item",[e._v(" 巡检内容： "),a("el-input",{attrs:{placeholder:"请输入巡检内容",clearable:""},model:{value:e.queryForm.checkContent,callback:function(t){e.$set(e.queryForm,"checkContent","string"===typeof t?t.trim():t)},expression:"queryForm.checkContent"}})],1),a("el-form-item",[e._v(" 状态： "),a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.queryForm.status,callback:function(t){e.$set(e.queryForm,"status",t)},expression:"queryForm.status"}},e._l(e.status,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),a("vab-query-form-right-panel",{attrs:{span:6}},[a("el-form-item",[a("el-button",{attrs:{icon:"el-icon-refresh",type:"primary"},on:{click:e.resetSearch}},[e._v(" 重置 ")]),a("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:e.queryData}},[e._v(" 查询 ")])],1)],1)],1)],1),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{xs:24,sm:24,md:8,lg:4,xl:4}},[a("h3",[e._v(" 巡检项分类 "),a("i",{staticClass:"el-icon-info"})]),a("el-tree",{attrs:{data:e.categoryData,props:e.defaultProps,"node-key":"id","default-expanded-keys":["root"]},on:{"node-click":e.handleNodeClick}})],1),a("el-col",{attrs:{xs:24,sm:24,md:16,lg:20,xl:20}},[a("h3",[e._v(" 巡检项目 "),a("i",{staticClass:"el-icon-info"}),a("el-button",{staticStyle:{float:"right"},attrs:{icon:"el-icon-plus",type:"primary"},on:{click:e.handleEdit}},[e._v(" 新增 ")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,"element-loading-text":e.elementLoadingText,"header-cell-style":{background:"#EFF3F8"}},on:{"selection-change":e.setSelectRows}},[a("el-table-column",{attrs:{"show-overflow-tooltip":"",type:"selection"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"checkContent",label:"巡检内容"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"使用状态"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-tag",{attrs:{effect:"dark",type:1==r.status?"success":"danger"}},[e._v(" "+e._s(1==r.status?"启用":"停用")+" ")])]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"createTime",label:"巡检时间"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleEdit(r)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleDelete(r)}}},[e._v("删除")])]}}])})],1),a("el-pagination",{attrs:{background:"","current-page":e.queryForm.pageIndex,"page-size":e.queryForm.pageSize,layout:e.layout,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),a("edit",{ref:"edit",on:{"fetch-data":e.fetchData}})],1)],1)],1)},o=[],i=a("1da1"),s=(a("a15b"),a("d81d"),a("159b"),a("a9e3"),a("96cf"),a("15d4")),c=a("9892"),n=a("2be9"),l={name:"MenuManagement",components:{Edit:n["default"]},data:function(){return{checkAttributes:[{value:"选项1",label:"黄金糕"},{value:"选项2",label:"双皮奶"},{value:"选项3",label:"蚵仔煎"}],checkAttributesValue:"",status:[{value:"1",label:"可用"},{value:"2",label:"不可用"}],categoryData:[],defaultProps:{children:"children",label:"catogoryName"},list:[],listLoading:!0,elementLoadingText:"正在加载...",layout:"total, sizes, prev, pager, next, jumper",total:0,selectRows:"",queryForm:{pageIndex:1,pageSize:10,checkContent:""}}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["getCheckCategoryList"])({status:1});case 2:a=t.sent,r=a.code,o=a.data,sessionStorage.setItem("categoryList",JSON.stringify(o)),200==r&&(e.categoryData=e.setTreeData(o),e.listLoading=!1),e.fetchData();case 8:case"end":return t.stop()}}),t)})))()},methods:{setSelectRows:function(e){this.selectRows=e},handleEdit:function(e){e.pid?this.$refs["edit"].showEdit(e):(this.queryForm.checkCatogoryId&&sessionStorage.setItem("checkCatogoryId",this.queryForm.checkCatogoryId),this.$refs["edit"].showEdit())},handleDelete:function(e){var t=this;if(e.pid)this.$baseConfirm("确定删除该条产品信息分类吗？",null,Object(i["a"])(regeneratorRuntime.mark((function a(){var r,o,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(s["doDelete"])({uuid:e.pid});case 2:r=a.sent,o=r.message,i=r.code,200===i&&(t.$baseMessage(o||"删除成功！","success"),t.fetchData());case 6:case"end":return a.stop()}}),a)}))));else{if(!(this.selectRows.length>0))return this.$baseMessage("未选中任何行","error"),!1;var a=this.selectRows.map((function(e){return e.pid})).join();this.$baseConfirm("你确定要删除选中项吗？",null,Object(i["a"])(regeneratorRuntime.mark((function e(){var r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["doDelete"])({ids:a});case 2:r=e.sent,o=r.msg,t.$baseMessage(o||"删除成功！","success"),t.fetchData();case 6:case"end":return e.stop()}}),e)}))))}},handleSizeChange:function(e){this.queryForm.pageSize=e,this.fetchData()},handleCurrentChange:function(e){this.queryForm.pageIndex=e,this.fetchData()},resetSearch:function(){this.queryForm.checkContent="",delete this.queryForm.status},setTreeData:function(e){e.forEach((function(e){delete e.children}));var t={};e.forEach((function(e){t[e.pid]=e}));var a=[];return e.forEach((function(e){var r=t[e.parentId];r?(r.children||(r.children=[])).push(e):a.push(e)})),a},queryData:function(){this.queryForm.pageIndex=1,this.fetchData()},fetchData:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.listLoading=!0,t.next=3,Object(s["getCheckList"])(e.queryForm);case 3:a=t.sent,r=a.data,e.list=r.result,e.total=Number(r.totalRecords),setTimeout((function(){e.listLoading=!1}),300);case 8:case"end":return t.stop()}}),t)})))()},handleNodeClick:function(e){this.queryForm.checkCatogoryId=e.pid,this.fetchData()}}},u=l,d=(a("0c85"),a("2877")),m=Object(d["a"])(u,r,o,!1,null,"44dfa250",null);t["default"]=m.exports},9892:function(e,t,a){"use strict";a.r(t),a.d(t,"getCheckCategoryList",(function(){return o})),a.d(t,"saveOrUpdate",(function(){return i})),a.d(t,"categoryGetId",(function(){return s})),a.d(t,"doDelete",(function(){return c}));var r=a("b775");function o(e){return Object(r["default"])({url:"/api/yxdpc/checkCatogory/getList",method:"post",data:e})}function i(e){return Object(r["default"])({url:"/api/yxdpc/checkCatogory/saveOrUpdate",method:"post",data:e})}function s(e){return Object(r["default"])({url:"/api/yxdpc/checkCatogory/getId",method:"post",data:e})}function c(e){return Object(r["default"])({url:"/api/yxdpc/checkCatogory/delete",method:"post",data:e})}},ca1f:function(e,t,a){e.exports={"menu-color":"rgba(255,255,255,.95)","menu-color-active":"rgba(255,255,255,.95)","menu-background":"#282c34"}}}]);