/*!
 *  build: vue-admin-beautiful 
 *  vue-admin-beautiful author: chuzhixin 1204505056@qq.com 
 *  vue-admin-beautiful QQ Group(QQ群): 972435319、1139183756 
 *  time: 2022-1-21 16:12:28
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7e69718a"],{"453b":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:e.title,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.close}},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"上级部门：",prop:"parentId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择"},model:{value:e.form.parentId,callback:function(t){e.$set(e.form,"parentId",t)},expression:"form.parentId"}},e._l(e.departments,(function(e){return r("el-option",{key:e.uuid,attrs:{label:e.departmentName,value:e.uuid}})})),1)],1),r("el-form-item",{attrs:{label:"部门名称：",prop:"departmentName"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.departmentName,callback:function(t){e.$set(e.form,"departmentName",t)},expression:"form.departmentName"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.close}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("确 定")])],1)],1)},a=[],s=r("1da1"),i=(r("96cf"),r("9db1")),o={name:"Edit",data:function(){return{form:{pid:"",parentId:"",departmentName:""},rules:{departmentName:[{required:!0,trigger:"blur",message:"请输入部门名称"}]},title:"",dialogFormVisible:!1,departments:[]}},created:function(){},methods:{showEdit:function(e){if(this.departments=JSON.parse(sessionStorage.getItem("departments")),e.pid)this.title="编辑",this.form=Object.assign({},e);else{this.title="添加";var t=sessionStorage.getItem("curUuid");t&&(this.form.parentId=t)}this.dialogFormVisible=!0},close:function(){this.$refs["form"].resetFields(),this.form=this.$options.data().form,this.dialogFormVisible=!1},save:function(){var e=this;this.$refs["form"].validate(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(r){var n,a,s,o,c,l,u,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=14;break}return n={},a=e.form,s=a.pid,o=a.parentId,c=a.departmentName,s&&(n.uuid=s),o&&(n.parentId=o),n.departmentName=c,t.next=8,Object(i["saveOrUpdate"])(n);case 8:l=t.sent,u=l.code,d=l.message,200===u&&(e.$baseMessage(d||"操作成功！","success"),e.$emit("fetch-data"),e.close()),t.next=15;break;case 14:return t.abrupt("return",!1);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}},c=o,l=r("2877"),u=Object(l["a"])(c,n,a,!1,null,null,null);t["default"]=u.exports},"9db1":function(e,t,r){"use strict";r.r(t),r.d(t,"getDeptTree",(function(){return a})),r.d(t,"getDept",(function(){return s})),r.d(t,"saveOrUpdate",(function(){return i})),r.d(t,"getDeptList",(function(){return o}));var n=r("b775");function a(e){return Object(n["default"])({url:"/api/dept/getDeptTree",method:"post",data:e})}function s(e){return Object(n["default"])({url:"/api/dept/getDept",method:"post",data:e})}function i(e){return Object(n["default"])({url:"/api/dept/saveOrUpdate",method:"post",data:e})}function o(e){return Object(n["default"])({url:"/api/dept/getDeptList",method:"post",data:e})}},d5c0:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"menuManagement-container"},[r("el-row",[r("el-col",{attrs:{xs:24,sm:24,md:8,lg:5,xl:5}},[r("h3",[e._v(" 部门列表 "),r("i",{staticClass:"el-icon-info"})]),r("el-tree",{attrs:{data:e.treeData,props:e.defaultProps,"node-key":"id","default-expanded-keys":["root"]},on:{"node-click":e.handleNodeClick}})],1),r("el-col",{attrs:{xs:24,sm:24,md:16,lg:19,xl:19}},[r("h3",[e._v(" 部门详情 "),r("i",{staticClass:"el-icon-info"}),r("el-button",{staticStyle:{float:"right"},attrs:{icon:"el-icon-plus",type:"primary"},on:{click:e.handleEdit}},[e._v(" 新增 ")])],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,"element-loading-text":e.elementLoadingText,"header-cell-style":{background:"#EFF3F8"}},on:{"selection-change":e.setSelectRows}},[r("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"departmentName",label:"部门名称"}}),r("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleEdit(n)}}},[e._v("编辑")])]}}])})],1)],1)],1),r("edit",{ref:"edit",on:{"fetch-data":e.reFreshData}})],1)},a=[],s=r("1da1"),i=(r("a15b"),r("d81d"),r("96cf"),r("9db1")),o=r("453b"),c={name:"DepartManage",components:{Edit:o["default"]},data:function(){return{treeData:[],deptData:[],defaultProps:{label:"name",children:"nodes"},list:[],listLoading:!1,elementLoadingText:"正在加载...",selectRows:"",curUuid:0}},created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getDeptTree(),e.getDeptList();case 2:case"end":return t.stop()}}),t)})))()},methods:{getDeptTree:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["getDeptTree"])({});case 2:r=t.sent,n=r.data,a=r.code,200===a&&(e.treeData=n);case 6:case"end":return t.stop()}}),t)})))()},getDeptList:function(){return Object(s["a"])(regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["getDeptList"])({});case 2:t=e.sent,r=t.data,n=t.code,200===n&&sessionStorage.setItem("departments",JSON.stringify(r));case 6:case"end":return e.stop()}}),e)})))()},setSelectRows:function(e){this.selectRows=e},handleEdit:function(e){e?this.$refs["edit"].showEdit(e):(this.curUuid&&sessionStorage.setItem("curUuid",this.curUuid),this.$refs["edit"].showEdit())},handleDelete:function(e){var t=this;if(e.pid)this.$baseConfirm("确定删除该条产品信息分类吗？",null,Object(s["a"])(regeneratorRuntime.mark((function r(){var n,a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,doDelete({uuid:e.pid});case 2:n=r.sent,a=n.message,s=n.code,200===s&&(t.$baseMessage(a||"删除成功！","success"),t.fetchData());case 6:case"end":return r.stop()}}),r)}))));else{if(!(this.selectRows.length>0))return this.$baseMessage("未选中任何行","error"),!1;var r=this.selectRows.map((function(e){return e.pid})).join();this.$baseConfirm("你确定要删除选中项吗？",null,Object(s["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,doDelete({ids:r});case 2:n=e.sent,a=n.msg,t.$baseMessage(a||"删除成功！","success"),t.fetchData();case 6:case"end":return e.stop()}}),e)}))))}},fetchData:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,n,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.listLoading=!0,t.next=3,Object(i["getDept"])({uuid:e.curUuid});case 3:r=t.sent,n=r.code,a=r.data,s=[],200===n&&(s.push(a),e.list=s,e.listLoading=!1);case 8:case"end":return t.stop()}}),t)})))()},handleNodeClick:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.curUuid=e.id,t.fetchData();case 2:case"end":return r.stop()}}),r)})))()},reFreshData:function(){this.getDeptTree(),this.getDeptList(),this.fetchData()}}},l=c,u=r("2877"),d=Object(u["a"])(l,n,a,!1,null,null,null);t["default"]=d.exports}}]);